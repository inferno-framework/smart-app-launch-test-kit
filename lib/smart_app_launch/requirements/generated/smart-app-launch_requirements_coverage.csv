Req Set,ID,URL,Requirement,Conformance,Actor,Sub-Requirement(s),Conditionality,SMART App Launch STU2.2 Client Short ID(s),SMART App Launch STU2.2 Client Full ID(s),SMART App Launch STU2.2 Short ID(s),SMART App Launch STU2.2 Full ID(s)
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,1,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#app-protection,"Apps SHALL ensure that when protocol steps include transmission of sensitive information (authentication secrets, authorization codes, tokens), transmission is ONLY to authenticated servers, over TLS-secured channels.",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,2,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#app-protection,Apps SHALL generate an unpredictable `state` parameter for each user session,SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,3,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#app-protection,Apps SHALL... include `state` with all authorization requests,SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,4,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#app-protection,App SHALL ... validate the `state` value for any request sent to its redirect URL.,SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,5,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#app-protection,An app SHALL NOT execute untrusted user-supplied inputs as code.,SHALL NOT,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,6,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#app-protection,An app SHALL NOT forward values passed back to its redirect URL to any other arbitrary or user-provided URL (a practice known as an “open redirector”).,SHALL NOT,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,7,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#app-protection,An app SHALL NOT store bearer tokens in cookies that are transmitted as clear text.,SHALL NOT,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,8,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#app-protection,Apps SHOULD persist tokens and other sensitive data in app-specific storage locations only,SHOULD,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,9,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#app-protection,Apps... SHOULD NOT persist [tokens and other sensitive data] … in system-wide-discoverable locations.,SHOULD,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,10,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#support-for-public-and-confidential-apps," any “secret” key, code, or string that is statically embedded in the app can potentially be extracted by an end-user or attacker. Hence security for these apps cannot depend on secrets embedded at install-time.",SHOULD NOT,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,11,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#determining-the-appropriate-app-type,"[U]se a `confidential app`[if your app is able to protect a secret]

Example: App runs on a trusted server with only server-side access to the secret
Example: App is a native app that uses additional technology (such as dynamic client registration and universal redirect_uris) to protect the secret",SHOULD,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,12,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#determining-the-appropriate-app-type,"[U]se a `public app`[if your app is not able to protect a secret]

Example: App is an HTML5 or JS in-browser app (including single-page applications) that would expose the secret in user space
Example: App is a native app that can only distribute a secret statically",SHOULD,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,13,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#considerations-for-pkce-support,All SMART apps SHALL support Proof Key for Code Exchange [(PKCE)](https://tools.ietf.org/html/rfc7636),SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,14,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#considerations-for-pkce-support,SMART servers [supporting the [PKCE](https://tools.ietf.org/html/rfc7636)] SHALL support the `S256` `code_challenge_method` ,SHALL,Server ,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,15,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#considerations-for-pkce-support,SMART servers [supporting the [PKCE](https://tools.ietf.org/html/rfc7636)] … SHALL NOT support the `plain` method. ,SHALL NOT,Server ,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,16,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#considerations-for-cross-origin-resource-sharing-cors-support,"Servers that support purely browser-based apps SHALL enable [Cross-Origin Resource Sharing (CORS)](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS) as follows: ... For requests from any origin, CORS configuration permits access to the public discovery endpoints (`.well-known/smart-configuration` and `metadata`)
",SHALL,Server ,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,17,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#considerations-for-cross-origin-resource-sharing-cors-support,"Servers that support purely browser-based apps SHALL enable [Cross-Origin Resource Sharing (CORS)](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS) as follows: ... For requests from a client’s registered origin(s), CORS configuration permits access to the token endpoint and to FHIR REST API endpoints",SHALL,Server ,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,18,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#smart-authorization--fhir-access-overview,"[In the SMART APP Launch process] the complete URLs of all apps approved for use by users of this EHR [SHALL] ... have been registered with the EHR authorization server.

",SHALL,Server ,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,19,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#register-app-with-ehr,"
SMART does not specify a standards-based registration process, but we encourage EHR implementers to consider the [OAuth 2.0 Dynamic Client Registration Protocol](https://tools.ietf.org/html/rfc7591) for an out-of-the-box solution.",MAY,Server ,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,20,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request,"at registration time every SMART app SHALL:

Register zero or more fixed, fully-specified launch URL with the EHR’s authorization server",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,21,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request,"at registration time every SMART app SHALL: ...
Register one or more fixed, fully-specified `redirect_uri` s with the EHR’s authorization server.",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,22,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request,"For confidential clients, additional registration-time requirements are defined based on the client authentication method. ... For asymmetric client authentication: a [JSON Web Key Set or JWSK URL](https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#registering-a-client-communicating-public-keys) is established
",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,23,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request,"For confidential clients, additional registration-time requirements are defined based on the client authentication method. ...
For symmetric client authentication: a [client secret](https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-symmetric.html) is established",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,24,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response,"The EHR confirms the app’s registration parameters and communicates a `client_id` to the app.
",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,29,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#retrieve-well-knownsmart-configuration," the app discovers the EHR FHIR server’s SMART configuration metadata, including OAuth `authorization_endpoint` and `token_endpoint` URLs.
The discovery URL is constructed by appending .well-known/smart-configuration to the FHIR Base URL. The app issues an HTTP GET to the discovery URL with an Accept header supporting application/json.",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,30,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-3,The EHR responds with a SMART configuration JSON document as described in the [Conformance](https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html) section.,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,31,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-4,"[When] the app constructs a request for an authorization code … the EHR SHALL ensure that the `code_verifier` is present and valid when the code is exchanged for an access token.

",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,32,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-4,"[When] the app constructs a request for an authorization code … [the] `response_type` [parameter is] required [and SHALL contain the] fixed value: `code`.
",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,33,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-4,[When] the app constructs a request for an authorization code … [the] `client_id` [parameter is] required [and SHALL contain the] client's identifier [provided during registration].,SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,34,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-4,[When] the app constructs a request for an authorization code...  [the] `redirect_uri`[parameter is] required [and] Must match one of the client's pre-registered redirect URIs,SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,35,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-4,"[When] the app constructs a request for an authorization code … [in the EHR Launch flow, the] `launch`[parameter is required, and] must match the launch value received from the EHR.",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,36,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-4,"[When] the app constructs a request for an authorization code …  [in the `Standalone Launch` flow, the] `launch` [parameter is] omitted ",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,37,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-4,"[When] the app constructs a request for an authorization code [the] …  `scope` [parameter is] `required` [and m]ust describe the access that the app needs.
",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,39,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-4,"[When] the app constructs a request for an authorization code [the] …  `state` [parameter is] `required` [and] The parameter SHALL be used for preventing cross-site request forgery or session fixation attacks

",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,40,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-4,"[When] the app constructs a request for an authorization code [the] …  `state` [parameter is] `required` [and] ... The app SHALL use an unpredictable value for the state parameter with at least 122 bits of entropy (e.g., a properly configured random uuid is suitable).

",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,41,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-4,"[When] the app constructs a request for an authorization code [the] …  `aud` [parameter is] `required`  ... [and SHALL contain the] URL of the EHR resource server from which the app wishes to retrieve FHIR data.   
(Note that in the case of an EHR launch flow, this `aud` value is the same as the launch's `iss` value.)",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,42,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-4,[When] the app constructs a request for an authorization code [the] …  servers SHALL support the `aud` parameter ,SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,43,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-4,[When] the app constructs a request for an authorization code [the] …  servers MAY support a `resource` parameter as a synonym for `aud`.,MAY,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,44,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-4,"[When] the app constructs a request for an authorization code [the] …  `code_challenge` [parameter is] `required`  ... [and] is generated by the app and used for the code challenge, as specified by [PKCE](https://tools.ietf.org/html/rfc7636).
See [considerations-for-pkce-support](https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#considerations-for-pkce-support).",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,45,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-4,[When] the app constructs a request for an authorization code [the] …  `code_challenge_method` [parameter is] `required`  ... [and Shall include the] Method used for the `code_challenge` parameter.,SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,46,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-4,"[When] the app constructs a request for an authorization code ... The app SHOULD limit its requested scopes to the minimum necessary (i.e., minimizing the requested data categories and the requested duration of access).",SHOULD,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,47,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-4,"[When an app requests an authorization code] If the app needs to authenticate the identity of or retrieve information about the end-user, it should include two OpenID Connect scopes: `openid` and `fhirUser`. When these scopes are requested and the request is granted, the app will receive an id_token along with the access token.",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,48,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-4,Authorization Servers SHALL support the use of the HTTP GET ... at the Authorization Endpoint,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,49,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-4,Authorization Servers SHALL support the use of the HTTP .. POST ... at the Authorization Endpoint,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,50,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-4,"Clients SHALL use either the HTTP GET or the HTTP POST method to send the Authorization Request to the Authorization Server.
",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,51,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-4,"If [clients are] using the HTTP GET method [for Authorization Requests], the request parameters are serialized using URI Query String Serialization. ",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,52,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-4,"If [clients are] using the HTTP POST method [for Authorization Requests], the request parameters are serialized using Form Serialization and the application/x-www-form-urlencoded content type.",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,53,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-4,The EHR decides whether to grant ... access  [in response to an Authorization Request]. This decision is communicated to the app when the EHR authorization server returns an authorization code,SHALL,Server ,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,54,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-4,The EHR decides whether to ... deny access [in response to an Authorization Request]. This decision is communicated to the app when the EHR authorization server returns … an eror response,SHALL,Server ,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,56,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-4,[When responding to an authorization request] the code is sent when the EHR authorization server causes the browser to navigate to the app’s redirect_uri,SHALL,Server ,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,57,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-4,"[When] the EHR authorization server causes the browser to navigate to the app’s redirect_uri … [the] `code` [parameter is] required [and SHALL contain the] The authorization code generated by the authorization server. 
",SHALL,Server ,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,58,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-4,"[When] the EHR authorization server causes the browser to navigate to the app’s redirect_uri … [the  authorization code in the] `code` [parameter] ... needs to expire shortly after it is issued to mitigate the risk of leaks.
",SHOULD,Server ,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,59,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-4,[When] the EHR authorization server causes the browser to navigate to the app’s redirect_uri … [the] `state` [parameter is] required [and SHALL contain t]he exact value received from the client [in parameter of the same name on the authorization request]. ,SHALL,Server ,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,60,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-4,[When an authorization repsonse is received t]he app SHALL validate the value of the state parameter [sent by the server] upon return to the redirect URL [matches the value the client sent in the authroization request]. ,SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,61,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-4,"The app…  SHALL ensure that the state value [associated with the authorization request and response] is securely tied to the user’s current session (e.g., by relating the state value to a session identifier issued by the app).",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,62,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-5,After obtaining an authorization code the app trades the code for an access token... [by issusing] an HTTP `POST` to the EHR authorization server’s token endpoint URL using content-type `application/x-www-form-urlencoded` as described in section 4.1.3 of [RFC6749](https://tools.ietf.org/html/rfc6749#section-4.1.3).,SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,63,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-5,"For `public apps`, authentication is not required [when making requests to the token endpoint] because a client with no secret cannot prove its identity when it issues a call. (The end-to-end system can still be secure because the client comes from a known, https-protected endpoint specified and enforced by the redirect uri.)",SHALL NOT,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,64,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-5,"For `confidential apps`, authentication is required [when making requests to the token endpoint]. ",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,65,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-5,"Confidential clients SHOULD use [Asymmetric Authentication](https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html) [for authentication when making requests to the token endpoint] if available, ",SHOULD,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,66,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-5,Confidential clients ... MAY use [Symmetric Authentication](https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-symmetric.html) [for authentication when making requests to the token endpoint].,MAY,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,67,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-5,[When an app requests an access token the] `grant_type`[parameter is] `required` [and SHALL contain the] fixed value: `authorization_code` ,SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,68,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-5,[When an app requests an access token the] `code`[parameter is] `required` [and SHALL contain the authorizaion c]ode that the app received from the authorization server,SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,69,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-5,[When an app requests an access token the] `redirect_uri`[parameter is] `required`[and SHALL contain the] same redirect_uri used in the initial authorization request ,SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,70,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-5,[When an app requests an access token the] `code_verifier`[parameter is] `required`[and SHALL be] ... used to verify against the `code_challenge` parameter previously provided in the authorize request.,SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,71,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-5,[When an app requests an access token the] `client_id`[parameter is] required for `public apps`,SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,72,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-5,[when an app requests an access token the] `client_id`[parameter is] ...omit[ed] for `confidential apps`,SHALL NOT,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,73,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-5,The EHR authorization server SHALL return a JSON object that includes an access token or a message indicating that the authorization request has been denied.,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,74,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-5,[When the EHR Authorization server responds to an autorization token request the]  'access_token`[parameter is] `required` [and SHALL contain t]he access token issued by the authorization server,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,75,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-5,[When the EHR Authorization server responds to an autorization token request the] `token_type`[parameer is] `required` [and SHALL contain the f]ixed value: `Bearer`,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,76,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-5,[When the EHR Authorization server responds to an autorization token request the] `expires_in`[parameter is] `recommended`[and SHOULD contain the l]ifetime in seconds of the access token.,SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,77,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-5,[When the EHR Authorization servers autorization token expires] the token SHALL NOT be accepted by the resource server,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,78,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-5,[When the EHR Authorization server responds to an autorization token request the] `scope`[parameter is] `required` [and SHALL contain the s]cope of access authorized. Note that this can be different from the scopes requested by the app.,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,79,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-5,[When the EHR Authorization server responds to an autorization token request the] `scope`[parameter is] can be different from the scopes requested by the app.,MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,80,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-5,"[When the EHR Authorization server responds to an autorization token request the] `id_token`[parameter is] `optional` [and MAY contain a]uthenticated user identity and user details, if requested.",MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,81,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-5,"[When the EHR Authorization server responds to an autorization token request the] `refresh_token`[parameter is] `optional` [and MAY contain the t]oken that can be used to obtain a new access token, using the same or a subset of the original authorization grants",MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,82,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-5,"[When the EHR Authorization server responds to an autorization token request the] `authorization_details`[parameter is] `optional` [and MAY contain a]dditional details describing where this token can be used, and any per-location context ",MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,83,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-5,"[When the EHR Authorization server responds to an autorization token request] if the app was launched from within a patient context, parameters to communicate the context values MAY BE included.",MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,84,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-5,"[When the EHR Authorization server responds to an autorization token request t]he parameters are included in the entity-body of the HTTP response, as described in section 5.1 of [RFC6749](https://tools.ietf.org/html/rfc6749).",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,85,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-5,The access token is a string of characters as defined in [RFC6749](https://tools.ietf.org/html/rfc6749) and [RFC6750](http://tools.ietf.org/html/rfc6750).,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,86,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-5,The authorization server’s response SHALL include the HTTP “Cache-Control” response header field with a value of “no-store”,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,87,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-5,The authorization server’s response SHALL include the HTTP ... “Pragma” response header field with a value of “no-cache”,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,88,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-5,"The EHR authorization server decides what `expires_in` value to assign to an access token ... as defined in section 1.5 of [RFC6749](https://tools.ietf.org/html/rfc6749#page-10), along with the access token.",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,89,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-5,"The EHR authorization server decides ... whether to issue a refresh token, as defined in section 1.5 of [RFC6749](https://tools.ietf.org/html/rfc6749#page-10), along with the access token.",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,90,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-5,"Apps SHOULD store tokens in app-specific storage locations only, and not in system-wide-discoverable locations.",SHOULD,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,91,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-5,Access tokens SHOULD have a valid lifetime no greater than one hour.,SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,92,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-5,Confidential clients may be issued longer-lived tokens than public clients.,MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,93,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-6,[When] fetch[ing] FHIR Resources… The [Client] app [SHALL} issue a request that includes an `Authorization` header that presents the `access_token` as a “Bearer” token,SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,94,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-6,The resource server SHALL validate the access token and ensure that it has not expired,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,95,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-6,The resource server SHALL validate the access token and ensure that … its scope covers the requested resource.,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,96,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-6, The resource server also validates that the `aud` parameter associated with the authorization [request] ... matches the resource server’s own FHIR endpoint.,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,97,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-6,"[When an app may receives] a FHIR resource that contains a “reference” to a resource hosted on a different resource server … [it] SHOULD NOT blindly follow such references and send along its access_token, as the token may be subject to potential theft.",SHOULD NOT,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,98,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-6,"[When an app may receives] a FHIR resource that contains a “reference” to a resource hosted on a different resource serve … [it] SHOULD either ignore the reference, or initiate a new request for access to that resource.",SHOULD,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,99,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#refresh-access-token,EHR implementers are also encouraged to consider using the [OAuth 2.0 Token Introspection Protocol](https://tools.ietf.org/html/rfc7662) to provide an introspection endpoint that clients can use to examine the validity and meaning of tokens.,SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,100,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#refresh-access-token,[The Auth Server SHALL provide a]n app with “online access”... new access tokens as long as the end-user remains online.,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,101,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#refresh-access-token,[The Auth Server SHALL provide a]pps with “offline access”... new access tokens without the user being interactively engaged.,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,102,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#refresh-access-token,A server can decide which client types (public or confidential) are eligible for offline access and able to receive a refresh token.,MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,103,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#refresh-access-token,A refresh token SHALL be bound to the same `client_id` and SHALL contain the same or a subset of the claims authorized for the access token with which it is associated. ,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,104,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#refresh-access-token,A refresh token ... SHALL contain the same or a subset of the claims authorized for the access token with which it is associated. ,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,105,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-7,"[When requesting a new access token using a refresh token the] `grant_type` [parameter is] `required`[and SHALL contain the] Fixed value: `refresh_token`
",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,106,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-7,"[When requesting a new access token using a refresh token the] `refresh_token` [parameter is] `required`[and SHALL contain the] The refresh token from a prior authorization response
",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,107,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-7,[When requesting a new access token using a refresh token the] `scope` [parameter is] `optional`[and MAY contain the] scopes of access requested.,MAY,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,108,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-7,"[When requesting a new access token using a refresh token the] `scope` [parameter is] present, it must be a strict sub-set of the scopes granted in the original launch (no new permissions can be obtained at refresh time).",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,109,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#request-7,[When requesting a new access token using a refresh token the]  a missing [`scope` parameter] value indicates a request for the same scopes granted in the original launch.,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,110,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-7,[When responding to a request for a new access token using a refresh token the] `access_token` [parameter is] `required`[and SHALL contain the n]ew access token issued by the authorization server,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,111,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-7,[When responding to a request for a new access token using a refresh token the]`token_type` [parameter is] `required`[and SHALL contain the] Fixed value: bearer,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,112,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-7,[When responding to a request for a new access token using a refresh token the] `expires_in`[parameter is] `required`[and SHALL contain the] The lifetime in seconds of the access token. ,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,113,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-7,[When responding to a request for a new access token using a refresh token the] `scope`[parameter is] `required` [and SHALL contain the] Scope of access authorized,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,114,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-7,[When responding to a request for a new access token using a refresh token the] `scope`[parameter value] will be the same as the scope of the original access token,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,115,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-7,[When responding to a request for a new access token using a refresh token the] `scope`[parameter value] can be different from the scopes requested by the app.,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,116,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-7,[When responding to a request for a new access token using a refresh token the] `refresh_token` [parameter is] `optional` [and MAY contain the] refresh token issued by the authorization server.,MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,117,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-7,"[When receiving a response to a request for a new access token using a refresh token if the] `refresh_token` [parameter is] present, the app should discard any previous refresh_token associated with this launch and replace it with this new value",SHOULD,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,118,https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html#response-7,"[When responding to a request for a new access token using a refresh token the] if the app was launched from within a patient context, parameters to communicate the context values MAY BE included.",MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,119,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#smarts-scopes-are-used-to-delegate-access,[When responding to] a client request… of a specific set of access rights; [servers SHALL respect] … underlyinmg system policies and permissions [even if they conflict with granted scopes],SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,120,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-fhir-resources,"[Client, SHALL include scope]  `c` for `create`[to request the ability to perform] Type level [create](http://hl7.org/fhir/http.html#create)",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,121,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-fhir-resources,"[Client, SHALL include scope] `r` for `read` [to request the ability to perform] Instance level [read](http://hl7.org/fhir/http.html#read), Instance level [vread](http://hl7.org/fhir/http.html#vread), and Instance level [history](http://hl7.org/fhir/http.html#history)",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,122,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-fhir-resources,"[Client, SHALL include scope] `u` for `update`[to request the ability to perform] Instance level [update](http://hl7.org/fhir/http.html#update)] ..., and Instance level [patch](http://hl7.org/fhir/http.html#patch)",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,123,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-fhir-resources,"Note that some servers allow for an [update operation to create a new instance](http://hl7.org/fhir/http.html#upsert), and this is allowed by the update scope",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,124,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-fhir-resources,"[Client, SHALL include scope] `d` for `delete` [to request the ability to perform] Type level [delete](http://hl7.org/fhir/http.html#delete)]",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,125,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-fhir-resources,"[Client, SHALL include scope] `s` for `search`[to request the ability to perform] Type level [search](http://hl7.org/fhir/http.html#search), Type level [history](http://hl7.org/fhir/http.html#history), System level [search](http://hl7.org/fhir/http.html#search), and System level [history](http://hl7.org/fhir/http.html#history)",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,126,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-fhir-resources,"For backwards compatibility with scopes defined in the SMART App Launch 1.0 specification, servers SHOULD advertise the `permission-v1` capability in their `.well-known/smart-configuration` discovery document",SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,127,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-fhir-resources,"For backwards compatibility with scopes defined in the SMART App Launch 1.0 specification, servers SHOULD …  return v1 scopes when v1 scopes are requested and granted",SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,128,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-fhir-resources,"For backwards compatibility with scopes defined in the SMART App Launch 1.0 specification, servers SHOULD …  process v1 scopes with the following semantics in v2:
v1 `.read` ⇒ v2 `.rs`
v1 `.write` ⇒ v2 `.cud`
v1 `.*` ⇒ v2 `.cruds`",SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,129,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-fhir-resources,"Scope requests with undefined or out of order interactions MAY be ignored, replaced with server default scopes, or rejected",MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,130,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#batches-and-transactions,[B]atch and transaction requests should [SHALL] be validated based on the actual requests within them.,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,131,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scope-equivalence,"Scopes can be combined to represent a union of access… In order to reduce token size, it is recommended that scopes be factored to their shortest form.",SHOULD,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,132,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#finer-grained-resource-constraints-using-search-parameters,"[To request a scope that applies to a subset of instances of a resource type, clients SHALL] add a query string suffix to existing scopes, starting with `?` and followed by a series of `param=value` items separated by `&`",SHALL,Client,,true,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,133,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scope-size-over-the-wire,"When initiating an authorization request, app developers should prefer POST-based authorization requests to GET-based requests, since this avoids URL length limits that might apply to GET-based authorization requests.",SHOULD,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,134,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scope-size-over-the-wire,"[S]ince access tokens are included in HTTP headers, servers should take care to ensure they do not get too large.",SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,135,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#fhir-resource-scope-syntax,"[T]he scope language is [the following sequence of characters:
- one of ""patient"", ""user"", or ""system""
- ""/""
- either a FHIR resource type or ""*""
- "".""
- optional ""c""
- optional ""r""
- optional ""u""
- optional ""d""
- optional ""s""
- optional ""?"" followed by at least 1 ""<param>=<value>"" pairs, where <param> is a valid search parameter and <value> is a valid corresponding value, with each pair each separated by ""&"" if there are multiple]",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,136,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#patient-specific-scopes,[When granting p]atient-specific scopes [servers promise to] allow [the client to] access to specific data about a single patient. Which patient is not specified here: FHIR Resource scopes are all about *what* and not *who*,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,137,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#patient-specific-scopes,[To request p]atient-specific scopes start [the scope string] with `patient/`,SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,138,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#patient-specific-scopes,"Note that some EHRs may not enable access to all related resources [when responding to data requests with a patient-specific scope] (for example, Practitioners linked to/from Patient-specific resources).",MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,139,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#patient-specific-scopes,"if a FHIR server supports linking one Patient record with another via `Patient.link`, the server documentation SHALL describe its authorization behavior.",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,140,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#user-level-scopes,[When granting u]ser-level scopes [servers promise to] allow [the client] access to specific data that a user can access. Note that this isn’t just data about the user; it’s data available to that user. ,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,141,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#user-level-scopes,[To request u]ser-level scopes start [the scope string] with `user/`.,SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,142,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#system-level-scopes,"[When granting s]ystem-level scopes [servers promise to allow access to] data that a client system is directly authorized to access; these scopes are useful in cases where there is no user in the loop, such as a data monitoring or reporting service. ",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,143,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#system-level-scopes,[To request s]ystem-level scopes start [the scope string] with `system/`.,SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,144,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#wildcard-scopes,"[When granting w]ildcard scopes…[servers promise to allow access to] all data for all available FHIR resources, both now and in the future.",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,145,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#wildcard-scopes,[T]he scopes ultimately granted by the authorization server may differ from the scopes requested by the client!,MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,146,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#wildcard-scopes,"[To request] Wildcard scopes [the scope string SHALL] contain a wildcard (`*`) for the FHIR resource  [e.g., `patient/*.cruds`]",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,147,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#wildcard-scopes,clients should examine the granted scopes by the authorization server and respond accordingly. Failure to do so may lead to situations where the client receives an authorization failure by the FHIR server because it attempted to access FHIR resources beyond the granted scopes.,SHOULD,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,148,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#wildcard-scopes,clients are encouraged to request only the scopes and permissions they need to function and avoid the use of wildcard scopes purely for the sake of convenience,SHOULD,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,149,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-context-data,[Context data scopes tell ther server] what context parameters will [SHALL]  be provided in the access token response,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,150,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-context-data,To request access to …[context data] an app [SHALL] ask for “launch context” scopes in addition to whatever FHIR Resource access scopes it needs.,SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,151,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-context-data,"To request access to …[context data, the scope string SHALL]  begin with `launch`.",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,152,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-context-data,[When clients n]eed patient context at launch time (FHIR Patient resource)[ they SHALL request the `launch/patient` scope].,SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,153,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-context-data,[When clients n]eed encounter context at launch time (FHIR Encounter resource)[ they SHALL request the `launch/encounter` scope].,SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,154,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-context-data,Any SMART EHR MAY extend this list [of context scopes] to support additional context [beyond patient and encounter[..,MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,155,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-context-data,"When specifying resource types [for additional launch contexts], convert the type names to all lowercase (e.g., launch/diagnosticreport)",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,156,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-context-data,"In situations where the same resource type might be used for more than one purpose (e.g., in a medication reconciliation app, one List of at-home medications and another List of in-hospital medications), the app can [(and SHALL if needed)] solicit [launch] context with a specific role by appending `?role={role}` [to the end of the launch context scope].",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,157,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-context-data,When using `?role=` in launch context requests: Each requested scope can include at most one role.,SHOULD,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,158,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-context-data,"When using `?role=` in launch context requests: ... If an app requires multiple roles, it MAY request multiple scopes",MAY,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,159,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-context-data,"When using `?role=` in launch context requests: … If an EHR receives a request for an unsupported role, it SHOULD return any launch context supported for the supplied resource type. ",SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,160,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-context-data,"When using `?role=` in launch context requests: … If an EHR receives a request for an unsupported role, … It MAY return alternative roles.",SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,161,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#apps-that-launch-from-the-ehr,"Apps that launch from the EHR will be passed an explicit URL parameter called `launch`, whose value must associate the app’s authorization request with the current EHR session.",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,162,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#apps-that-launch-from-the-ehr,"The application [that launches from an EHR] could choose to also provide `launch/patient`, `launch/encounter`, or other `launch/` scopes as “hints” regarding which contexts the app would like the EHR to gather.",MAY,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,163,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#apps-that-launch-from-the-ehr,"

The EHR MAY ignore these hints [regarding which contexts the app would like the EHR to gather] (for example, if the user is in a workflow where these contexts do not exist).",MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,164,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#apps-that-launch-from-the-ehr,"If an application requests a FHIR Resource scope which is restricted to a single patient (e.g., patient/*.rs), and the authorization results in the EHR granting that scope, the EHR SHALL establish a patient in context. ",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,165,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#apps-that-launch-from-the-ehr,"The EHR MAY refuse authorization requests including `patient/` that do not also include a valid `launch`, or it MAY infer the `launch/patient` scope.",MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,166,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#standalone-apps,Standalone apps that launch outside the EHR do not have any EHR context at the outset. These apps must explicitly request EHR context. ,SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,167,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#standalone-apps,"[when a standalone app requests EHR context] The EHR SHOULD provide the requested context if requested by the following scopes, unless otherwise noted.",SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,168,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#launch-context-arrives-with-your-access_token,"Once an app is authorized, the token response will include any context data the app requested and any (potentially) unsolicited context data the EHR may decide to communicate",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,169,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#launch-context-arrives-with-your-access_token,"Once an app is authorized, the token response will include any … [l]aunch context parameters [and] come alongside the access token… [which SHALL]  appear as JSON parameters.",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,170,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#launch-context-arrives-with-your-access_token,"[The] launch context parameter... `patient`... [SHALL contain a s]tring value with a patient id, indicating that the app was launched in the context of FHIR Patient... If the app has any patient-level scopes, they will be scoped to Patient [provided in this parameter].",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,171,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#launch-context-arrives-with-your-access_token,"[The] launch context parameter... `encounter`... [SHALL contain a s]tring value with an encounter id, indicating that the app was launched in the context of FHIR Encounter",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,172,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#launch-context-arrives-with-your-access_token,[The] launch context parameter... `fhirContext`... [SHALL contain an a]rray of objects referring to any resource type other than “Patient” or “Encounter”.,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,173,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#launch-context-arrives-with-your-access_token,[The] launch context parameter... `need_patient_banner`... [SHALL contain a] boolean value indicating whether the app was launched in a UX context where a patient banner is required (when true) or may not be required (when false). An app receiving a value of false might not need to take up screen real estate displaying a patient banner. ,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,174,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#launch-context-arrives-with-your-access_token,[The] launch context parameter... `intent`... [SHALL contain a s]tring value describing the intent of the application launch,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,175,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#launch-context-arrives-with-your-access_token,[The] launch context parameter... `smart_style_url`... [SHALL contain a s]tring URL where the EHR’s style parameters can be retrieved (for apps that support [styling](https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#styling)),SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,176,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#launch-context-arrives-with-your-access_token,[The] launch context parameter... `tenant`... [SHALL contain a s]tring conveying an opaque identifier for the healthcare organization that is launching the app. This parameter is intended primarily to support EHR Launch scenarios.,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,177,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#fhircontext-exp,"{A]ny contextual resource types that were requested by a launch scope will appear in the `fhirContext` array... except ... Patient and Encounter resource types, which will not be deprecated from top-level parameters, and they will not be permitted within the `fhirContex`t array unless they include a `role` other than ""launch"".",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,178,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#fhircontext-exp,"Each object in the `fhirContext` array SHALL include at least one of `""reference""`, `""canonical""`, or `""identifier""`",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,179,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#fhircontext-exp,"Each object in the `fhirContext` array… MAY contain [the property] `""reference""` (string) … [which is the] relative reference to a FHIR resource. Note that there MAY be more than one fhirContext item referencing the same type of resource.",MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,180,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#fhircontext-exp,Note that there MAY be more than one fhirContext item referencing the same type of resource [using the property `reference`].,MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,181,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#fhircontext-exp,"Each object in the `fhirContext` array… MAY contain [the property] `""canonical""` (string) … [which is the] canonical URL for the `fhirContext` item (MAY include a version suffix)",MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,182,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#fhircontext-exp,[The `canonical` property in a `fhirContext` array object] MAY include a version suffix),MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,183,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#fhircontext-exp,"Each object in the `fhirContext` array… MAY contain [the property] `""identifier""` (object) … [which is the] FHIR Identifier for the `fhirContext` item",MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,184,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#fhircontext-exp,"Each object in the `fhirContext` array… MAY contain [the property] `""type""` (string) … [which is the] FHIR resource type of the `fhirContext` item (RECOMMENDED when `""identifier""` or `""canonical""` is present)",MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,185,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#fhircontext-exp,"[The `type` property in a `fhirContext` array object is] RECOMMENDED when `""identifier""` or `""canonical""` is present)",SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,186,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#fhircontext-exp,"Each object in the `fhirContext` array… MAY contain [the property] `""role""` (string) … [which is the] URI identifying the role of this `fhirContext` item.",MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,187,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#fhircontext-exp,[The `role` property in a `fhirContext` array object may contain r]elative role URIs ... if [they are] defined in this specification; other roles require the use of absolute URIs,MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,188,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#fhircontext-exp,[O]ther roles [defined outside of this specification] require the use of absolute URIs [when used in the `role` property in a `fhirContext` array object],SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,189,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#fhircontext-exp,This [`role`] property MAY be omitted ,MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,190,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#fhircontext-exp, This  [`role`] property... SHALL NOT be the empty string.,SHOULD NOT,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,191,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#fhircontext-exp,"The absence of a role property [in a `fhirContext` array object] is semantically equivalent to a role of `""launch""`, indicating to a client [which SHALL interpret it to mean] that the app launch was performed in the context of the referenced resource.",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,192,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#fhircontext-exp,Multiple `fhirContext` items MAY have the same role.,MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,193,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#launch-intent,"If a SMART EHR provides a value that the client does not recognize, or does not provide a value, the client app SHOULD display a default application UI context.",SHOULD,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,194,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#launch-intent,The meaning of intent values must be negotiated between the app and the EHR.,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,195,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-identity-data,Some apps need to authenticate the end-user. This can be accomplished by requesting the scope `openid`. ,MAY,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,196,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-identity-data,"When the `openid` scope is requested, apps can [(if a FHIR representation of the user is needed, SHALL,)] also request the `fhirUser` scope to obtain a FHIR resource representation of the current user",SHALL,Client,,true,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,197,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-identity-data," If the EHR cannot represent the user with a FHIR resource, it cannot support the `fhirUser` scope.",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,198,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-identity-data,"This [instance returned from the `fhirUser` URL] will be a resource of type Patient, Practitioner, PractitionerRole, RelatedPerson, or Person",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,199,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-identity-data,"Note that [the] `Person` [resource type] is only used if the other resource types do not apply to the current user, for example, the “authorized representative” for >1 patients [would be a Person since RelatedPerson can be associated only with a single Patient].",SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,200,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-identity-data,"When these [identity data] scopes are requested (and the request is granted), the [server SHALL send and the] app will receive an [`id_token`](http://openid.net/specs/openid-connect-core-1_0.html#CodeIDToken) that comes alongside the access token.",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,201,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-identity-data,This token must be [validated according to the OIDC specification](http://openid.net/specs/openid-connect-core-1_0.html#IDTokenValidation) [by the client app].,SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,202,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-identity-data,"To learn more about the user, the app should  treat the `fhirUser` claim as the URL of a FHIR resource representing the current user [and SHALL perform a FHIR read interaction to get it].",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,203,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-identity-data,"This [`fhirUser`] URL MAY be absolute (e.g., https://ehr.example.org/Practitioner/123)",MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,204,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-identity-data,"This [`fhirUser`] URL ... MAY be relative to the FHIR server base URL associated with the current authorization request (e.g., Practitioner/123)…. Note that the FHIR server base URL is the same as the URL represented in the aud parameter passed in to the authorization request.",MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,205,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-identity-data,"To be considered compatible with the SMART’s sso-openid-connect capability, … The EHR SHALL support the Authorization Code Flow, with the request parameters as defined in [SMART App Launch](https://hl7.org/fhir/smart-app-launch/STU2.2/app-launch.html).",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,206,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-identity-data,"To be considered compatible with the SMART’s sso-openid-connect capability, … Support is not required for [Authorization Code Flow] parameters that OIDC lists as optional (e.g., `id_token_hint`, `acr_value`), but EHRs are encouraged to review these optional parameters.",MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,207,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-identity-data,"To be considered compatible with the SMART’s sso-openid-connect capability, …The EHR SHALL publish public keys as bare JWK keys",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,208,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-identity-data,[If the EHR publishes public keys as bare JWK keys they] MAY also be accompanied by X.509 representations of those keys,MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,209,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-identity-data,"To be considered compatible with the SMART’s sso-openid-connect capability, … The EHR SHALL support the inclusion of SMART’s `fhirUser` claim within the `id_token` issued for any requests that grant the `openid` and `fhirUser` scopes.",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,210,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-identity-data,"To be considered compatible with the SMART’s sso-openid-connect capability, … The EHR SHALL support Signing ID Tokens with RSA SHA-256",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,211,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-identity-data,"To be considered compatible with the SMART’s sso-openid-connect capability, … A SMART app SHALL NOT pass the `auth_time` claim or `max_age` parameter to a server that does not support receiving them.",SHALL NOT,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,212,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-identity-data,"Servers MAY include support for [OpenID Connect features, including … `claims` parameters on the authorization request",MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,213,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-identity-data,"Servers MAY include support for [OpenID Connect features, including] … Request Objects on the authorization request",MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,214,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-identity-data,"Servers MAY include support for [OpenID Connect features, including] … UserInfo endpoint with claims exposed to clients",MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,215,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-a-refresh-token,"To request a `refresh_token` that can be used to obtain a new access token after the current access token expires, add [the] `online_request` [scope that requests a refresh token that] … will be usable for as long as the end-user remains online.",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,216,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#scopes-for-requesting-a-refresh-token,"To request a `refresh_token` that can be used to obtain a new access token after the current access token expires, add [the] `offline_access`[Scope that requests a refresh token] … that will remain usable for as long as the authorization server and end-user will allow, regardless of whether the end-user is online.",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,217,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#extensibility,"additional context parameters and scopes … [defined by the server and] used as extensions … [SHOULD use] the following namespace conventions _use a full URI that you control (e.g., http://example.com/scope-name) [or] _use any string starting with `__` (two underscores)",SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,218,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#steps-for-using-an-id-token,"[to use and ID token, Apps SHALL]
1. Examine the ID token for its “issuer” property
2.Perform a `GET {issuer}/.well-known/openid-configuration`
3.Fetch the server’s JSON Web Key by following the “jwks_uri” property [from the retrieved `openid-configuration`]
4. Validate the token’s signature against the public key [retrieved from the ""jwks_uri"" location in the token's `openid-configuration`]
5.Extract the fhirUser claim [from the verified token] and treat it as the URL of a FHIR resource",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,219,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#appendix-uri-representation-of-scopes,"When URI representations are required, the SMART scopes SHALL be prefixed with `http://smarthealthit.org/fhir/scopes/`, so that a `patient/*.r` scope would be `http://smarthealthit.org/fhir/scopes/patient/*.r`",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,220,https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html#appendix-uri-representation-of-scopes,"To represent OpenID scopes as URIs, the prefix `http://openid.net/specs/openid-connect-core-1_0#` SHALL be used.",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,225,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#register-smart-backend-service-communicating-public-keys,"Before a SMART client can run against a FHIR server, the client SHALL register with the server by following the [registration steps described in `client-confidential-asymmetric` authentication](https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#registering-a-client-communicating-public-keys).",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,226,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#retrieve-well-knownsmart-configuration,"[T]he app [SHALL discover] the EHR FHIR server’s SMART configuration metadata, including OAuth token endpoint URL",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,227,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#request,The app [SHALL issue] an HTTP GET with an `Accept` header supporting `application/json` to retrieve the SMART configuration file [from [base]/.well-known/smart-configuration],SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,228,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#response,Servers [SHALL] respond  [to requests to [base]/.well-known/smart-configuration] with a discovery response that meets [discovery requirements described in `client-confidential-asymmetric` authentication](https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#discovery-requirements).  [from [base]/.well-known/smart-configuration],SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,229,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#obtain-access-token,Use of the client credentials grant type requires that the client SHALL be a “confidential” client capable of protecting its authentication credential.,SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,230,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#request-1,"To begin the exchange, the client SHALL use the [Transport Layer Security (TLS) Protocol Version 1.2 (RFC5246)](https://tools.ietf.org/html/rfc5246) or a more recent version of TLS to authenticate the identity of the FHIR authorization server and to establish an encrypted, integrity-protected link for securing all exchanges between the client and the FHIR authorization server’s token endpoint.",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,231,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#request-1,All exchanges described herein between the client and the FHIR server SHALL be secured using TLS V1.2 or a more recent version of TLS .,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,232,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#request-1,All exchanges described herein between the client and the FHIR server SHALL be secured using TLS V1.2 or a more recent version of TLS .,SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,233,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#request-1,"Before a client can request an access token, it [SHALL] generates a one-time-use authentication JWT [as described in `client-confidential-asymmetric` authentication](https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#authenticating-to-the-token-endpoint) ",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,234,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#request-1,"After generating this authentication JWT, the client requests an access token via HTTP `POST` to the FHIR authorization server’s token endpoint URL, using content-type `application/x-www-form-urlencoded`",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,235,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#request-1,[When requesting] an access token via HTTP POST to the FHIR authorization server’s token endpoint URL [the] `scope` [parameter is] `required` [and SHALL contain] … the scope of access requested ... following the [SMART Scopes syntax](https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html),SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,236,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#request-1,[when requesting] an access token via HTTP POST to the FHIR authorization server’s token endpoint URL [the] `grant_type` [parameter is] `required` [and SHALL contain the] … Fixed value: `client_credentials`,SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,237,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#request-1,[when requesting] an access token via HTTP POST to the FHIR authorization server’s token endpoint URL [the] `client_assertion_type` [parameter is] `required` [and SHALL contain] … Fixed value: `urn:ietf:params:oauth:client-assertion-type:jwt-bearer`,SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,238,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#request-1,[when requesting] an access token via HTTP POST to the FHIR authorization server’s token endpoint URL [the] `client_assertion` [parameter is] `required` [and SHALL contain] … [the s]igned authentication JWT value,SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,239,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#scopes,"For Backend Services, requested scopes will be `system/` scopes",SHOULD,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,240,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#scopes,"The client is pre-authorized by the server. In other words, by the time a client initiates an access token request, the server has already associated the client with the authority to access certain data.",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,241,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#scopes,"The client then includes a set of scopes in the access token request [`scope` parameter], which the server … [SHALL]  apply [as] additional access restrictions following the SMART Scopes syntax.",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,242,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#scopes,"The use of Backend Services with user/ and patient/ scopes is not prohibited, but would require out-of-band coordination to establish context (e.g., to establish which user or patient applies).",MAY,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,243,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#enforce-authorization,"[When a] Client explicitly asks for data that it is not authorized to see (e.g., a client asks for Observation resources but has scopes that only permit access to Patient resources) …a server SHOULD respond with a failure to the initial request.",SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,244,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#enforce-authorization,"[When a] Client explicitly asks for data that the server does not support (e.g., a client asks for Practitioner resources but the server does not support FHIR access to Practitioner data) ... a server SHOULD respond with a failure to the initial request.",SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,245,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#enforce-authorization,"[When a] Client explicitly asks for data that the server supports and that appears consistent with its access scopes – but some additional out-of-band rules/policies/restrictions prevents the client from being authorized to see these data... the server MAY withhold certain results from the response, and MAY indicate to the client that results were withheld by including OperationOutcome information in the “error” array for the response as a partial success.",MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,246,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#enforce-authorization,"[When a server does not return data that the clien's scopes indicate it has access to, it] MAY indicate to the client that results were withheld by including OperationOutcome information in the “error” array for the response as a partial success.",MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,247,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#enforce-authorization,"Rules regarding circumstances under which a client is required to obtain and present an access token along with a request are based on risk-management decisions that each FHIR resource service needs to [(SHALL)] make, considering the workflows involved, perceived risks, and the organization’s risk-management policies.",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,248,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#enforce-authorization,Refresh tokens SHOULD NOT be issued.,SHOULD NOT,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,249,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#validate-authentication-jws,The FHIR authorization server [SHALL validate] a client’s authentication JWT according to the client-confidential-asymmetric authentication profile … [per the] [JWT validation rules](https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#signature-verification).,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,250,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#evaluate-requested-access,"Once the client has been authenticated, the FHIR authorization server SHALL mediate the request to assure that the scope requested is within the scope pre-authorized to the client.",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,251,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#issue-access-token,"If an error is encountered during the authorization process, the FHIR authorization server SHALL respond with the appropriate error message defined in [Section 5.2 of the OAuth 2.0 specification](https://tools.ietf.org/html/rfc6749#page-45)",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,252,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#issue-access-token,"If an error is encountered during the authorization process, [t]he FHIR authorization server SHOULD include an `error_uri` or `error_description` as defined in OAuth 2.0.",SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,253,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#issue-access-token,"If the access token request is valid and authorized, the FHIR authorization server SHALL issue an access token in response.",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,254,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#issue-access-token,[When responding with an access token t]he `access_token` [parameter is] `required` [and] SHALL [contain] The access token issued by the FHIR authorization server.,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,255,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#issue-access-token,[When responding with an access token t]he `token_type` [parameter is] `required` [and] SHALL [contain] Fixed value: bearer.,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,256,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#issue-access-token,[When responding with an access token t]he `expires_in` [parameter is] `required` [and] SHALL [contain] The lifetime in seconds of the access token.,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,257,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#issue-access-token,"[When responding with an access token t]he recommended value [for the `expires_in` parameter] is 300, for a five-minute token lifetime.",SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,258,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#issue-access-token,[When responding with an access token t]he `scope` [parameter is] `required` [and] SHALL [contain s]cope of access authorized.,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,259,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#issue-access-token,[When responding with an access token t]he `scope` [parameter value] can be different from the scopes requested by the app.,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,260,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#issue-access-token,"to minimize risks associated with token redirection, the scope of each access token SHOULD encompass, and be limited to, the resources requested",SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,261,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#issue-access-token,[When responding with an access token a]ccess tokens issued under this [backed services] profile SHALL be short-lived,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,262,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#issue-access-token,"[When responding with an access token t]he `expires_in` value SHOULD NOT exceed 300, which represents an expiration-time of five minutes. ",SHOULD NOT,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,263,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#issue-access-token,"To establish longer-term access [using backend services given the short-lived duration of access tokens], clients can request new access tokens as needed.",SHOULD,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,264,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#request-2,The app [SHALL issue] a request [for FHIR data[ that includes an Authorization header that presents the access_token as a “Bearer” token: `Authorization: Bearer {{access_token}}`,SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,265,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#response-2,The resource server SHALL validate the access token and ensure that it has not expired,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,266,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#response-2,The resource server SHALL validate the access token and ensure … that its scope covers the requested resource,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,267,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#response-2,"On occasion, a Backend Service [client] may receive a FHIR resource that contains a “reference” to a resource hosted on a different resource server. The Backend Service [client] SHOULD NOT blindly follow such references and send along its access_token, as the token may be subject to potential theft",SHOULD NOT,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,268,https://hl7.org/fhir/smart-app-launch/STU2.2/backend-services.html#response-2,"On occasion, a Backend Service may receive a FHIR resource that contains a “reference” to a resource hosted on a different resource server… The Backend Service [client] SHOULD either ignore the reference, or initiate a new request for access to that resource.",SHOULD,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,269,https://hl7.org/fhir/smart-app-launch/STU2.2/token-introspection.html#token-introspection,"SMART on FHIR EHRs SHOULD support Token Introspection, which allows a broader ecosystem of resource servers to leverage authorization decisions managed by a single authorization server.",SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,270,https://hl7.org/fhir/smart-app-launch/STU2.2/token-introspection.html#token-introspection,Token Introspection is conducted [and clients SHALL make requests]  according to [RFC 7662: OAuth 2.0 Token Introspection](https://datatracker.ietf.org/doc/html/rfc7662),SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,271,https://hl7.org/fhir/smart-app-launch/STU2.2/token-introspection.html#token-introspection,Token Introspection is conducted [and servers SHALL respond]  according to [RFC 7662: OAuth 2.0 Token Introspection](https://datatracker.ietf.org/doc/html/rfc7662),SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,272,https://hl7.org/fhir/smart-app-launch/STU2.2/token-introspection.html#required-fields-in-the-introspection-response,"In the introspection response… the `active` field [is] required by RFC7662 (a boolean indicating whether the access token is active), ",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,273,https://hl7.org/fhir/smart-app-launch/STU2.2/token-introspection.html#required-fields-in-the-introspection-response,[T]he following fields SHALL be included in the introspection response:… the `scope` [field a]s included in the original access token response,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,274,https://hl7.org/fhir/smart-app-launch/STU2.2/token-introspection.html#required-fields-in-the-introspection-response,[T]he following fields SHALL be included in the introspection response:… the `client_id`[field a]s included in the original access token response,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,275,https://hl7.org/fhir/smart-app-launch/STU2.2/token-introspection.html#required-fields-in-the-introspection-response,[T]he following fields SHALL be included in the introspection response:… the... `exp`[field] …  [will be t]he integer timestamp indicates when the access token expires.,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,276,https://hl7.org/fhir/smart-app-launch/STU2.2/token-introspection.html#required-fields-in-the-introspection-response,[T]he following fields SHALL be included in the introspection response:… the... `exp`[field] …  will be consistent the with `expires_in` interval provided in the original access token response. ,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,277,https://hl7.org/fhir/smart-app-launch/STU2.2/token-introspection.html#conditional-fields-in-the-introspection-response,"If a launch context parameter defined in [Scopes and Launch Context](https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html) (e.g., `patient` or `intent`) was included in the original access token response, the parameter SHALL be included in the token introspection response.",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,278,https://hl7.org/fhir/smart-app-launch/STU2.2/token-introspection.html#conditional-fields-in-the-introspection-response,"If an id_token was included in the original access token response, the … [`iss`] claims from the ID Token SHALL be included in the Token Introspection response",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,279,https://hl7.org/fhir/smart-app-launch/STU2.2/token-introspection.html#conditional-fields-in-the-introspection-response,"If an id_token was included in the original access token response, the … [`sub`] claims from the ID Token SHALL be included in the Token Introspection response",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,280,https://hl7.org/fhir/smart-app-launch/STU2.2/token-introspection.html#conditional-fields-in-the-introspection-response,"If an id_token was included in the original access token response, the [`fhirsuer`]... claims from the ID Token SHOULD be included in the Token Introspection response",SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,281,https://hl7.org/fhir/smart-app-launch/STU2.2/token-introspection.html#authorization-to-perform-token-introspection,SMART on FHIR EHRs MAY implement access control protecting the Token Introspection endpoint.,MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,282,https://hl7.org/fhir/smart-app-launch/STU2.2/token-introspection.html#authorization-to-perform-token-introspection,"If access control is implemented [on the token introspection endpoint], any client authorized to issue Token Introspection API calls SHALL be permitted to authenticate to the Token Introspection endpoint by providing an appropriately-scoped SMART App or SMART Backend Service bearer token in the Authorization header. ",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,283,https://hl7.org/fhir/smart-app-launch/STU2.2/token-introspection.html#authorization-to-perform-token-introspection,Clients authorized in this way [to acess an access-controlled token introspection endpoint] are [(SHALL be)] able to introspect tokens issued to any client,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,285,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#advertising-server-support-for-this-profile,[A] server [SHALL advertise] its support for SMART Confidential Clients with Asymmetric Keys by including the `client-confidential-asymmetric` capability at is `.well-known/smart-configuration` endpoint; ,SHALL,Server ,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,286,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#advertising-server-support-for-this-profile,"[When supporting the  `client-confidential-asymmetric`capability a server's .well-known/smart-configuration`] configuration properties [SHALL] include ... `token_endpoint`,",SHALL,Server ,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,287,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#advertising-server-support-for-this-profile,"[When supporting the  `client-confidential-asymmetric`capability a server's .well-known/smart-configuration`] configuration properties [SHALL] include ... `scopes_supported`, ",SHALL,Server ,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,288,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#advertising-server-support-for-this-profile,[When supporting the  `client-confidential-asymmetric`capability a server's .well-known/smart-configuration`] configuration properties [SHALL] include ...`token_endpoint_auth_methods_supported` (with values that include `private_key_jwt`),SHALL,Server ,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,289,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#advertising-server-support-for-this-profile,"[When supporting the  `client-confidential-asymmetric`capability a server's .well-known/smart-configuration`] configuration properties [SHALL] include ... `token_endpoint_auth_signing_alg_values_supported` (with values that include at least one of `RS384`, `ES384`).",SHALL,Server ,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,290,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#registering-a-client-communicating-public-keys,"Before a SMART client can run against a FHIR server, the client SHALL generate or obtain an asymmetric key pair",SHALL,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,291,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#registering-a-client-communicating-public-keys,"Before a SMART client can run against a FHIR server, the client SHALL ... register its public key set with that FHIR server’s authorization service (referred to below as the “FHIR authorization server”).",SHALL,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,292,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#registering-a-client-communicating-public-keys,"SMART does not require a standards-based registration process, but we encourage FHIR service implementers to consider using the [OAuth 2.0 Dynamic Client Registration Protocol](https://tools.ietf.org/html/draft-ietf-oauth-dyn-reg)",SHOULD,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,293,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#registering-a-client-communicating-public-keys,[Before using  the `client-confidential-asymmetric`capability t]he client SHALL register the **public key** that the client will use to authenticate itself to the FHIR authorization server.,SHALL,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,294,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#registering-a-client-communicating-public-keys,"[When registering a public key for the `client-confidential-asymmetric`capability t]he public key SHALL be conveyed to the FHIR authorization server in a [JSON Web Key (JWK)](https://tools.ietf.org/html/rfc7517) structure presented within a JWK Set, as defined in JSON Web Key Set (JWKS).",SHALL,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,295,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#registering-a-client-communicating-public-keys,The client SHALL protect the associated private key [for the `client-confidential-asymmetric`capability] from unauthorized disclosure and corruption.,SHALL,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,296,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#registering-a-client-communicating-public-keys,[When registering clients to use the `client-confidential-asymmetric`capability] FHIR authorization servers SHALL support registration of client JWKs using … URL to JWK set,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,297,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#registering-a-client-communicating-public-keys,[When registering clients to use the `client-confidential-asymmetric`capability] FHIR authorization servers SHALL support registration of client JWKs using ... JWK Set directly,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,298,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#registering-a-client-communicating-public-keys,clients SHALL choose a server-supported method [for communicating their JWKs] at registration time,SHALL,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,299,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#registering-a-client-communicating-public-keys,"[When registering their JWKs to a server for use in the `client-confidential-asymmetric`capability`, clients SHOULD send a] URL to JWK Set (strongly preferred).",SHOULD,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,300,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#registering-a-client-communicating-public-keys,"[When registering their JWKs to a server for use in the `client-confidential-asymmetric`capability`, clients MAY send the] JWK Set directly (strongly discouraged)",MAY,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,301,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#registering-a-client-communicating-public-keys,"[For the URL to JWK Set method, the  value SHALL be] the TLS-protected endpoint where the client’s public JWK Set can be found",SHALL,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,302,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#registering-a-client-communicating-public-keys,"[For the URL to JWK Set method to register a JWK for use in the `client-confidential-asymmetric`capability`, the  value]  ... SHALL be accessible via TLS without client authentication or authorization",SHALL,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,303,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#registering-a-client-communicating-public-keys,[For the URL to JWK Set method to register a JWK for use in the `client-confidential-asymmetric`capability` t]he client SHOULD return a “Cache-Control” header in its JWKS response,SHOULD,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,304,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#registering-a-client-communicating-public-keys,"If a client cannot host the JWK Set at a TLS-protected URL [when registering a JWK for use in the `client-confidential-asymmetric`capability,] it MAY supply the JWK Set directly to the FHIR authorization server at registration time",MAY,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,305,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#registering-a-client-communicating-public-keys,"[if Client supplies JWK set directly to the FHIR authorization server during registration for the `client-confidential-asymmetric`capability,] the FHIR authorization server SHALL protect the JWK Set from corruption.",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,306,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#registering-a-client-communicating-public-keys,"[if Client supplies JWK set directly to the FHIR authorization server during registration fro the `client-confidential-asymmetric`capability,]   the FHIR authorization server ... SHOULD remind the client to send an update whenever the key set changes.",SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,307,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#registering-a-client-communicating-public-keys,The client SHALL be capable of generating a JSON Web Signature in accordance with [RFC7515](https://tools.ietf.org/html/rfc7515).,SHALL,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,308,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#registering-a-client-communicating-public-keys,The client SHALL support ... `RS384` … for the JSON Web Algorithm (JWA) header parameter as defined in [RFC7518](https://tools.ietf.org/html/rfc7518).,SHALL,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,309,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#registering-a-client-communicating-public-keys,The client SHALL support ... `ES384` for the JSON Web Algorithm (JWA) header parameter as defined in [RFC7518](https://tools.ietf.org/html/rfc7518).,SHALL,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,310,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#registering-a-client-communicating-public-keys,The FHIR authorization server SHALL be capable of validating signatures with at least one of `RS384` or `ES384`.,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,311,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#registering-a-client-communicating-public-keys,servers MAY support … additional algorithms for signature validation [when using the `client-confidential-asymmetric`capability].,MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,312,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#registering-a-client-communicating-public-keys,clients ... MAY …  use additional algorithms for signature validation [when using the `client-confidential-asymmetric`capability].,MAY,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,313,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#registering-a-client-communicating-public-keys,"No matter how a JWK Set is communicated to the FHIR authorization server, each JWK SHALL represent an asymmetric key by including `kty` and `kid` properties, with content conveyed using “bare key” properties (i.e., direct base64 encoding of key material as integer values)",SHALL,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,314,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#registering-a-client-communicating-public-keys,"For RSA public keys, each JWK SHALL include `n` and `e` values (modulus and exponent)",SHALL,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,315,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#registering-a-client-communicating-public-keys,"For ECDSA public keys, each JWK SHALL include `crv`, `x`, and `y` values (curve, x-coordinate, and y-coordinate, for EC keys)",SHALL,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,316,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#registering-a-client-communicating-public-keys,"Upon registration, the client SHALL be assigned a `client_id`",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,317,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#registering-a-client-communicating-public-keys,[T]he client SHALL use [their assigned `client_id`] when requesting an access token.,SHALL,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,318,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#authenticating-to-the-token-endpoint,"the client SHALL use the [Transport Layer Security (TLS) Protocol Version 1.2 (RFC5246)](https://tools.ietf.org/html/rfc5246) or a more recent version of TLS to authenticate the identity of the FHIR authorization server and to establish an encrypted, integrity-protected link for securing all exchanges between the client and the FHIR authorization server’s token endpoint.",SHALL,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,319,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#request,"Before a client can request an access token, it SHALL generate a one-time-use JSON Web Token (JWT) that will be used to authenticate the client to the FHIR authorization server.",SHALL,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,320,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#request,The authentication JWT … SHALL be signed with the client’s private key (which SHOULD be an `RS384` or `ES384` signature).,SHALL,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,321,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#request,"[When] a client generate[s] a one-time-use JSON Web Token (JWT)… [the]`alg`[Authentication JWT header value is] `required` [and SHALL contain t]he JWA algorithm (e.g., RS384, ES384) used for signing the authentication JWT.",SHALL,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,322,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#request,[When] a client generate[s] a one-time-use JSON Web Token (JWT)… [the]`kid`[Authentication JWT header value is] `required` [and SHALL contain t]he identifier of the key-pair used to sign this JWT [which] SHALL be unique within the client's JWK Set. ,SHALL,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,323,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#request,[When] a client generate[s] a one-time-use JSON Web Token (JWT)… [the]`typ`[header value is] `required`[with] Fixed value: JWT.,SHALL,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,324,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#request,[When] a client generate[s] a one-time-use JSON Web Token (JWT)… [the]`jku`[header value is] `optional` [and contains t]he TLS-protected URL to the JWK Set that contains the public key(s) accessible without authentication or authorization.,MAY,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,325,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#request,"When [the `jku` Authentication JWT header value is] present, this SHALL match the JWKS URL value that the client supplied to the FHIR authorization server at client registration time.",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,326,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#request,"When [the `jku` Authentication JWT header value is] absent, the FHIR authorization server SHOULD fall back on the JWK Set URL or the JWK Set supplied at registration time.",SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,327,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#request,"[When] a client generate[s] a one-time-use JSON Web Token (JWT)… [the]`iss`[claim is] `required`… [and] SHALL [contain the] Issuer of the JWT --the client's `client_id`, as determined during registration with the FHIR authorization server ",SHALL,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,328,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#request,"[When] a client generate[s] a one-time-use JSON Web Token (JWT)… [the]`sub`[claim is] `required`… [and] SHALL [contain] The client's `client_id`, as determined during registration with the FHIR authorization server (note that this is the same as the value for the iss claim)",SHALL,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,329,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#request,"[When] a client generate[s] a one-time-use JSON Web Token (JWT)… [the]`aud`[claim is] `required`… [and] SHALL [contain] The FHIR authorization server's ""token URL"" (the same URL to which this authentication JWT will be posted)",SHALL,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,330,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#request,"[When] a client generate[s] a one-time-use JSON Web Token (JWT)… [the]`exp`[claim is] `required`… [and] SHALL [contain the] Expiration time integer for this authentication JWT, expressed in seconds since the ""Epoch"" (1970-01-01T00:00:00Z UTC). This time S",SHALL,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,331,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#request,[When] a client generate[s] a one-time-use JSON Web Token (JWT)… [the]`exp`[claim] ... SHALL be no more than five minutes in the future.,SHALL,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,332,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#request,[When] a client generate[s] a one-time-use JSON Web Token (JWT)… [the]`jti`[claim is] `required`… [and] SHALL [contain a] nonce string value that uniquely identifies this authentication JWT,SHALL,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,333,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#request,[When the client requests an access token] … [the]`client_assertion_type`[parameter is] `required`… [and] SHALL [contain the] Fixed value: `urn:ietf:params:oauth:client-assertion-type:jwt-bearer`,SHALL,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,334,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#request,[When the client requests an access token] … [the]`client_assertion`[parameter is] `required`… [and] SHALL [contain the] Signed authentication JWT value,SHALL,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,335,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#signature-verification,The FHIR authorization server SHALL validate the JWT according to the processing requirements defined in [Section 3 of RFC7523](https://tools.ietf.org/html/rfc7523#section-3) including validation of the signature on the JWT,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,336,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#signature-verification,"The FHIR authorization server SHALL … check that the `jti` value has not been previously encountered for the given `iss` within the maximum allowed authentication JWT lifetime (e.g., 5 minutes). This check prevents replay attacks.",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,337,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#signature-verification,The FHIR authorization server SHALL … ensure that the `client_id` provided is known and matches the JWT’s `iss` claim.,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,338,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#signature-verification,"To resolve a key to verify signatures, a FHIR authorization server SHALL follow this algorithm:

1. If the `jku` header is present, verify that the jku is whitelisted (i.e., that it matches the JWKS URL value supplied at registration time for the specified `client_id`).

a. If the jku header is not whitelisted, the signature verification fails.
b. If the jku header is whitelisted, create a set of potential keys by dereferencing the jku URL. Proceed to step 3.

2. If the `jku` header is absent, create a set of potential key sources consisting of all keys found in the registration-time JWKS or found by dereferencing the registration-time JWK Set URL. Proceed to step 3.

3. Identify a set of candidate keys by filtering the potential keys to identify the single key where the `kid` matches the value supplied in the client's JWT header, and the kty is consistent with the signature algorithm supplied in the client's JWT header (e.g., `RSA` for a JWT using an RSA-based signature, or `EC` for a JWT using an EC-based signature). If no keys match, or more than one key matches, the verification fails.

4. Attempt to verify the JWK using the key identified in step 3.",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,339,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#signature-verification,To retrieve the keys from a JWKS URL ... a FHIR authorization server [SHALL issue] a HTTP GET request for that URL to obtain a JWKS response.,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,340,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#response,"If an error is encountered during the authentication process, the server SHALL respond with an `invalid_client error` as defined by the [OAuth 2.0 specification](https://tools.ietf.org/html/rfc6749#section-5.2).",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,341,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#response,The FHIR authorization server SHALL NOT cache a JWKS for longer than the client’s cache-control header indicates.,SHALL NOT,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,342,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html#response,The FHIR authorization server SHOULD cache a client’s JWK Set according to the client’s cache-control header; it doesn’t need to retrieve it anew every time. ,SHALL NOT,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,343,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-symmetric.html#profile-audience-and-scope,SMART App Launch clients that can maintain a secret but cannot manage asymmetric keypairs [may use the] … SMART’s `client-confidential-symmetric` authentication mechanism. This profile is not intended for SMART Backend Services clients.,MAY,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,344,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-symmetric.html#profile-audience-and-scope,This  [ `client-confidential-symmetric`] profile is not intended for [severs to use with] SMART Backend Services clients.,SHALL NOT,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,345,https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-symmetric.html#authentication-using-a-client_secret,"If a client has registered for Client Password authentication (i.e., it possesses a client_secret that is also known to the EHR), the client authenticates by supplying an Authorization header with HTTP Basic authentication, where the username is the app’s client_id and the password is the app’s client_secret.",SHALL,client,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,346,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#capability-sets,A SMART on FHIR server SHOULD support one or more Capability Sets.,SHOULD,server,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,348,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#patient-access-for-standalone-apps,"[To support the ] Patient Access for Standalone Apps [Capability Set, a server SHALL support the following capabilities:]
1. `launch-standalone`
2. At least one of `client-public` or `client-confidential-symmetric`; and MAY support `client-confidential-asymmetric`
3. `context-standalone-patient`
4. `permission-patient `",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,349,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#patient-access-for-standalone-apps,"[To support the ] Patient Access for EHR Launch (i.e. from Portal) [Capability Set, a server SHALL support the following capabilities:]
1.` launch-ehr`
2. At least one of `client-public` or `client-confidential-symmetric`; and MAY support `client-confidential-asymmetric`
3.`context-ehr-patient`
4. `permission-patient`",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,350,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#patient-access-for-standalone-apps,"[To support the ] Clinician Access for Standalone [Capability Set, a server SHALL support the following capabilities:]
1. `launch-standalone`
2. At least one of `client-public` or `client-confidential-symmetric`; and MAY support `client-confidential-asymmetric`
3. `permission-user`
4. `permission-patient `",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,351,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#patient-access-for-standalone-apps,"[To support the ] Clinician Access for EHR Launch [Capability Set, a server SHALL support the following capabilities:]
1. `launch-ehr`
2. At least one of `client-public` or `client-confidential-symmetric`; and MAY support `client-confidential-asymmetric`
3. `context-ehr-patient` support
4. `context-ehr-encounter` support
5. `permission-user
6. `permission-patient `",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,352,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#capabilities,[Servers listing the] `launch-ehr` [capability SHALL provide] support for SMART’s EHR Launch mode. ,,,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,353,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#capabilities,[Servers listing the] `launch-standalone` [capability SHALL provide] support for SMART’s Standalone Launch mode,,,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,354,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#capabilities,[Servers listing the] `authorize-post` [capability SHALL provide] support for POST-based authorization,,,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,355,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#capabilities,[Servers listing the] `client-public` [capability SHALL provide] support for SMART’s public client profile (no client authentication). ,,,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,356,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#capabilities,[Servers listing the] `client-confidential-symmetric` [capability SHALL provide] support for SMART’s symmetric confidential client profile (“client secret” authentication). See [Client Authentication: Symmetric](https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-symmetric.html),,,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,357,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#capabilities,[Servers listing the] `client-confidential-asymmetric` [capability SHALL provide] support for SMART’s asymmetric confidential client profile (“JWT authentication”). See [Client Authentication: Asymmetric](https://hl7.org/fhir/smart-app-launch/STU2.2/client-confidential-asymmetric.html).,,,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,358,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#capabilities,[Servers listing the] `sso-openid-connect` [capability SHALL provide] support for SMART’s OpenID Connect profile,,,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,359,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#capabilities,[Servers listing the] `context-banner` [capability SHALL provide] support for “need patient banner” launch context (conveyed via need_patient_banner token parameter). ,,,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,360,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#capabilities,[Servers listing the] `context-style` [capability SHALL provide] support for `SMART style URL` launch context (conveyed via smart_style_url token parameter). This capability is deemed experimental. ,,,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,361,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#capabilities,"[Servers listing the] `context-ehr-patient` [capability SHALL provide] support for patient-level launch context (requested by `launch/patient` scope, conveyed via patient token parameter)",,,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,362,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#capabilities,"[Servers listing the] `context-ehr-encounter` [capability SHALL provide] support for encounter-level launch context (requested by `launch/encounter` scope, conveyed via `encounter` token parameter)",,,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,363,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#capabilities,"[Servers listing the] `context-standalone-patient` [capability SHALL provide] support for patient-level launch context (requested by `launch/patient` scope, conveyed via` patient` token parameter)",,,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,364,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#capabilities,"[Servers listing the] `context-standalone-encounter` [capability SHALL provide] support for encounter-level launch context (requested by `launch/encounter` scope, conveyed via `encounter` token parameter)",,,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,365,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#capabilities,[Servers listing the] `permission-offline` [capability SHALL provide] support for “offline” refresh tokens (requested by `offline_access` scope),,,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,366,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#capabilities,"[Servers listing the] `permission-online` [capability SHALL provide] support for “online” refresh tokens requested during EHR Launch (requested by `online_access` scope). This capability is deemed experimental, providing the input to a scope negotiation that could result in granting an online or offline refresh token (see [Scopes and Launch Context](https://hl7.org/fhir/smart-app-launch/STU2.2/scopes-and-launch-context.html)).",,,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,367,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#capabilities,"[Servers listing the] `permission-patient` [capability SHALL provide] support for patient-level scopes (e.g., `patient/Observation.rs`)",,,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,368,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#capabilities,"[Servers listing the] `permission-user` [capability SHALL provide] support for user-level scopes (e.g., `user/Appointment.rs`)",,,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,369,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#capabilities,"[Servers listing the] `permission-v1` [capability SHALL provide] support for SMARTv1 scope syntax (e.g., patient/Observation.read)",,,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,370,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#capabilities,"[Servers listing the] `permission-v2` [capability SHALL provide] support for SMARTv2 granular scope syntax (e.g., `patient/Observation.rs?category=http://terminology.hl7.org/CodeSystem/observation-category|vital-signs`)",,,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,371,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#capabilities,[Servers listing the] `smart-app-state` [capability SHALL provide] support for managing [SMART App State](https://hl7.org/fhir/smart-app-launch/STU2.2/app-state.html). ,,,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,372,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#using-well-known,FHIR endpoints requiring authorization SHALL serve a JSON document at the location formed by appending `/.well-known/smart-configuration` to their base URL.,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,373,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#using-well-known,"The server SHALL convey the FHIR OAuth authorization endpoints and any optional SMART Capabilities it supports using this “Well-Known Uniform Resource Identifiers (URIs)” JSON document (see [RFC5785](https://datatracker.ietf.org/doc/html/rfc5785)). Contrary to RFC5785 Appendix B.4, the `.well-known` path component may be appended even if the FHIR endpoint already contains a path component",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,374,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#using-well-known,"Responses for `/.well-known/smart-configuration` requests SHALL be JSON, regardless of `Accept` headers provided in the request.",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,375,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#using-well-known,[C]lients MAY omit an `Accept` header  [when requesting the `/.well-known/smart-configuration`] ,MAY,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,376,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#using-well-known,[In responses for `/.well-known/smart-configuration` requests] servers MAY ignore any client-supplied Accept headers  ,MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,377,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#using-well-known,[In responses for `/.well-known/smart-configuration` requests] servers SHALL respond with application/json,SHALL,server ,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,378,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#using-well-known,[In responses for `/.well-known/smart-configuration` requests] All endpoint URLs in the response document SHALL be absolute URLs.,SHALL,server ,,,NA,NA,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,379,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#using-well-known,"Clients encountering relative endpoint URLs (e.g., in the context of legacy or non-conformant servers) SHOULD evaluate them relative to the FHIR Server Base URL following [RFC1808](https://datatracker.ietf.org/doc/html/rfc1808#section-4).",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,380,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#response,A JSON document must be returned using the `application/json`mime type.,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,381,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#metadata,[When responding to a `/.well-known/smart-configuration` request] if the server’s capabilities include `sso-openid-connect`[the] ..Metadata`issuer`[is] required ... [and SHALL contain the] String conveying this system’s OpenID Connect Issuer URL,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,382,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#metadata,[When responding to a `/.well-known/smart-configuration` request] if the server’s capabilities include `sso-openid-connect`[the] ...Metadata ...`jwks_uri`[is] required  [and Shall contain the] string conveying this system’s JSON Web Key Set URL,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,383,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#metadata,[When responding to a `/.well-known/smart-configuration` request] if server supports the `launch-ehr` or `launch-standalone` capability [the] ...Metadata ...`authorization_endpoint`[is] required … [and Shall contain the] URL to the OAuth2 authorization endpoint,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,384,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#metadata,[When responding to a `/.well-known/smart-configuration` request the] ...Metadata ...`grant_types_supported`[is] required … [and Shall contain the] Array of grant types supported at the token endpoint. The options are “authorization_code” (when SMART App Launch is supported) and “client_credentials” (when SMART Backend Services is supported).,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,385,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#metadata,[When responding to a `/.well-known/smart-configuration` request the] ...Metadata ...`token_endpoint`[is] required … [and Shall contain the] URL to the OAuth2 token endpoint.,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,386,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#metadata,"[When responding to a `/.well-known/smart-configuration` request the] ...Metadata ...`token_endpoint_auth_methods_supported`[is] OPTIONAL … [and Shall contain the] array of client authentication methods supported by the token endpoint. The options are “client_secret_post”, “client_secret_basic”, and “private_key_jwt”.",MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,387,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#metadata,[When responding to a `/.well-known/smart-configuration` request the] ...Metadata ...`user_access_brand_bundle`[is] RECOMMENDED … [and Shall contain the] URL for a Brand Bundle. See User [Access Brands](https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html).,SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,388,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#metadata,[When responding to a `/.well-known/smart-configuration` request the] ...Metadata ...`user_access_brand_identifier`[is] RECOMMENDED … [and Shall contain the] Identifier for the primary entry in a Brand Bundle.  See User [Access Brands](https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html).,SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,389,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#metadata,[When responding to a `/.well-known/smart-configuration` request the] ...Metadata ...`scopes_supported`[is] RECOMMENDED … [and Shall contain the] Array of scopes a client may request. See [scopes and launch context]. The server SHALL support all scopes listed here; additional scopes MAY be supported (so clients should not consider this an exhaustive list).,SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,390,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#metadata,[When responding to a `/.well-known/smart-configuration` request the] ...Metadata ...`response_types_supported`[is] RECOMMENDED … [and Shall contain the] URL where an end-user can view which applications currently have access to data and can make adjustments to these access rights.,SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,391,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#metadata,[When responding to a `/.well-known/smart-configuration` request the] ...Metadata ...`introspection_endpoint`[is] RECOMMENDED … [and Shall contain the] URL to a server’s introspection endpoint that can be used to validate a token.,SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,392,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#metadata,[When responding to a `/.well-known/smart-configuration` request the] ...Metadata ...`revocation_endpoint`[is] RECOMMENDED … [and Shall contain the] URL to a server’s revoke endpoint that can be used to revoke a token.,SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,393,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#metadata,"[When responding to a `/.well-known/smart-configuration` request the] ...Metadata ...`capabilities`[is] REQUIRED … [and Shall contain the] Array of strings representing SMART capabilities (e.g., `sso-openid-connect` or `launch-standalone`) that the server supports.",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,394,https://hl7.org/fhir/smart-app-launch/STU2.2/conformance.html#metadata,"[When responding to a `/.well-known/smart-configuration` request the] ...Metadata ...`code_challenge_methods_supported`[is] REQUIRED … [and Shall contain the] Array of PKCE code challenge methods supported. The `S256` method SHALL be included in this list, and the `plain` method SHALL NOT be included in this list.",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,395,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#conformance-overview,"Any organization ...that wishes to appear as a branded entity in user-facing apps ... [is]  RECOMMENDED to define an Organization identifier where `system` is `urn:ietf:rfc:3986` and `value` is the HTTPS URL for the brand’s primary web presence, omitting any “www.” prefix from the domain and omitting any path component",SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,396,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#conformance-overview,"Any organization hosting or enabling management of a User Access Brand Bundle...
SHALL publish at least a “primary brand” that references each FHIR endpoint in the Brand Bundle",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,397,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#conformance-overview,"Any organization hosting or enabling management of a User Access Brand Bundle...
SHOULD support the publication of a more detailed Brand hierarchy",SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,398,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#conformance-overview,"Any organization hosting or enabling management of a User Access Brand Bundle...
SHALL populate `Bundle.timestamp` to advertise the timestamp of the last change to the contents
",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,399,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#conformance-overview,"Any organization hosting or enabling management of a User Access Brand Bundle...
SHOULD populate `Bundle.entry.resource.meta.lastUpdated` with a more detailed timestamp if the system tracks updates per Resource.",SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,400,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#conformance-overview,"Any organization hosting or enabling management of a User Access Brand Bundle…
SHALL support Cross-Origin Resource Sharing (CORS) for all GET requests to the artifacts described in this guide.
",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,401,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#conformance-overview,"Any organization hosting or enabling management of a User Access Brand Bundle...
SHOULD include a weak `Etag` header in all Brand Bundle HTTP responses",SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,402,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#conformance-overview,"Any organization hosting or enabling management of a User Access Brand Bundle...
SHALL allow Health Data Providers to manage all data elements marked “Must-Support” in the [“User Access Brand”](https://hl7.org/fhir/smart-app-launch/STU2.2/StructureDefinition-user-access-brand.html) and [“User Access Endpoint”](https://hl7.org/fhir/smart-app-launch/STU2.2/StructureDefinition-user-access-endpoint.html) profiles",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,403,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#conformance-overview,"Any organization hosting or enabling management of a User Access Brand Bundle… SHALL support customer-supplied Organization identifiers (`system` and `value`)
 ",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,404,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#conformance-overview,Any organization hosting or enabling management of a User Access Brand Bundle… MAY provide a Data Absent Reason of `asked-declined` or `asked-unknown` in a Brand Bundle,MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,405,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#conformance-overview,"Any organization hosting or enabling management of a User Access Brand Bundle… SHALL NOT use Data Absent Reasons other than `asked-declined` or `asked-unknown` in a Brand Bundle
 ",SHALL NOT,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,406,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#conformance-overview,Any SMART on FHIR server that supports discovery of a User Access Brand Bundle. SHOULD include `user_access_brand_bundle` and `user_access_brand_identifier` properties in the SMART configuration JSON respons,SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,407,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#conformance-overview,"Any SMART on FHIR server that supports discovery of a User Access Brand Bundle... When populating `user_access_brand_bundle`
SHOULD link to a Bundle that includes only Brands and Endpoints affiliated with the Health Data Provider responsible for this SMART on FHIR server",SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,408,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#conformance-overview,Any SMART on FHIR server that supports discovery of a User Access Brand Bundle… When populating `user_access_brand_bundle` MAY link to a Bundle with Brands or Endpoints for additional Health Data Providers,MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,409,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#conformance-overview,Any SMART on FHIR server that supports discovery of a User Access Brand Bundle... When populating `user_access_brand_bundle` SHALL populate `user_access_brand_identifier` in SMART configuration JSON response if the `user_access_brand_bundle` refers to a Bundle with multiple Brands.,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,410,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#conformance-overview,"Any SMART on FHIR server that supports discovery of a User Access Brand Bundle...
When populating `user_access_brand_identifier`SHALL include a` value`",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,411,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#conformance-overview,Any SMART on FHIR server that supports discovery of a User Access Brand Bundle… When populating `user_access_brand_identifier`SHOULD include a system,SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,412,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#conformance-overview,Any SMART on FHIR server that supports discovery of a User Access Brand Bundle… When populating `user_access_brand_identifier`SHALL ensure this identifier matches exactly one `Organization.identifier` in the referenced Brand Bundle,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,413,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#conformance-overview,Any SMART on FHIR app that leverages a User Access Brand Bundle SHOULD provide an `If-None-Match` header in all Brand Bundle requests to avoid re-fetching data that have not changed,SHOULD,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,414,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#conformance-overview,Any SMART on FHIR app that leverages a User Access Brand Bundle SHOULD cache Brand Bundle responses by Etag,SHOULD,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,415,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#conformance-overview,Any SMART on FHIR app that leverages a User Access Brand Bundle SHALL select FHIR resources linked from the `.well-known/smart-configuration` if they differ from the resources in a vendor-consolidated Brand Bundle,SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,416,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#fhir-profiles,"For fine-grained organizational management, apps SHALL select the FHIR resources linked from .well-known/smart-configuration if they differ from the resources in a vendor-consolidated Brand Bundle.",SHALL,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,417,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#brand-bundle-profile,Vendors SHALL publish at least a “primary brand” for each endpoint and SHOULD support the publication of a more detailed Brand hierarchy.,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,418,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#brand-bundle-profile,Brand Bundles SHALL populate `Bundle.timestamp` to advertise the timestamp of the last change to the contents,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,419,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#brand-bundle-profile,Brand Bundles SHOULD populate `Bundle.entry.resource.meta.lastUpdated` with a more detailed timestamp if the system tracks updates per Resource.,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,420,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#consistent-identifiers-for-organizations,Apps can use a Brand’s Organization.identifier element to merge content published in multiple sources.,MAY,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,421,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#consistent-identifiers-for-organizations,EHRs SHALL support customer-supplied identifiers (`system` and `value`).,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,422,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#consistent-identifiers-for-organizations,"It is RECOMMENDED that each Brand include an identifier where `system` is `urn:ietf:rfc: 3986` (meaning the identifier is a URL) and `value` is the HTTPS URL for the Brand’s primary web presence, omitting any “www.” prefix from the domain and omitting any path component.",SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,423,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#managing-cross-origin-resource-sharing-cors-for-fhir-resources,Publishers SHALL support [Cross-Origin Resource Sharing (CORS)](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Origin) for all GET requests to the artifacts described in this guide.,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,424,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#caching-brand-bundles,Publishers SHOULD include a weak `Etag` header in all HTTP responses. ,SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,425,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#caching-brand-bundles,Clients SHOULD cache responses by Etag,SHOULD,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,426,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#caching-brand-bundles,Clients SHOULD … provide an `If-None-Match` header in all requests to avoid re-fetching data that have not changed,SHOULD,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,427,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#metadata-in-well-knownsmart-configuration,FHIR servers supporting this [User-access Brands and Endpoints] IG SHOULD include the… `user_access_brand_bundle` property [containing the] URL of a Brand Bundle… in the SMART configuration JSON response,SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,428,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#metadata-in-well-knownsmart-configuration,FHIR servers supporting this [User-access Brands and Endpoints] IG SHOULD include the… `user_access_brand_identifier` property [containing the] FHIR Identifier for this server’s primary Brand within the Bundle… in the SMART configuration JSON response,SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,429,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#metadata-in-well-knownsmart-configuration,Publishers SHALL populate this [`user_access_brand_identifier`] property if the referenced Brand Bundle includes more than one Brand.,SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,430,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#metadata-in-well-knownsmart-configuration,"When present, this [`user_access_brand_identifier`] identifier SHALL consist of a value",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,431,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#metadata-in-well-knownsmart-configuration,"When present, this [`user_access_brand_identifier`] identifier … SHOULD have a system.",SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,432,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#metadata-in-well-knownsmart-configuration,The Brand Bundle SHALL include exactly one Brand with an Organization.identifier that matches the primary Brand identifier from SMART configuration JSON.,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,433,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#metadata-in-well-knownsmart-configuration,The Brand Bundle SHOULD include only the Brands and Endpoints associated with the SMART on FHIR server that links to the Bundle.,SHOULD,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,434,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#metadata-in-well-knownsmart-configuration,"the Brand Bundle MAY have additional Brands or Endpoints (e.g., supporting a publication pattern where endpoints from a given vendor might point to a comprehensive, centralized vendor-managed list).",MAY,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,435,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#metadata-in-well-knownsmart-configuration,Note that the presence of an Endpoint in the Brand Bundle does not provide an implicit authorization to access the Endpoint. Clients that require access to the data provided by the FHIR Endpoints in the Brand Bundle can use SMART Configuration metadata to determine authorization requirements.,MAY,Client,,,,,NA,NA
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,436,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#must-support-definition-ms-and-data-absent-reasons,User Access Brand profile elements labeled as “must support” mean publishers must provide a way for Brands to populate the value,SHALL,Server,,,NA,NA,,
hl7.fhir.uv.smart-app-launch_2.2.0_Requirements,437,https://hl7.org/fhir/smart-app-launch/STU2.2/brands.html#must-support-definition-ms-and-data-absent-reasons,"If the EHR has asked, but a Brand administrator has not supplied a value, the EHR MAY provide a [Data Absent Reason](http://hl7.org/fhir/StructureDefinition/data-absent-reason) of `asked-declined` or `asked-unknown`. The EHR SHALL NOT use other Data Absent Reasons.",MAY,Server,,,NA,NA,,
